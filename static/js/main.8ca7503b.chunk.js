(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a(28)},,,,,,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var i=a(0),n=a.n(i),r=a(8),o=a.n(r),l=(a(16),a(2)),c=a(3),s=a(6),d=a(4),m=a(5),u=a(1),h=(a(18),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).handleAddClick=a.handleAddClick.bind(Object(u.a)(Object(u.a)(a))),a.handleDeleteClick=a.handleDeleteClick.bind(Object(u.a)(Object(u.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"handleAddClick",value:function(e){this.props.listItemAction("add",this.props.id,e.clientY)}},{key:"handleDeleteClick",value:function(){this.props.listItemAction("delete",this.props.id)}},{key:"render",value:function(){var e,t=this;return n.a.createElement("tr",null,n.a.createElement("td",{className:this.props.stocked?"":"unstocked-item"},this.props.loading?(e=this.props.loadingTime,n.a.createElement("div",null,n.a.createElement("div",{className:"loading-bar",style:{animationDuration:e/1e3+"s"}},"... Loading ..."))):this.props.name),n.a.createElement("td",null,this.props.loading?null:"$".concat(this.props.price)),n.a.createElement("td",{className:"button-cell"},!this.props.blocked&&!this.props.loading?n.a.createElement("button",{className:"action-link green-button",onClick:t.handleAddClick},"+"):n.a.createElement("div",{className:"action-link"})),n.a.createElement("td",{className:"button-cell"},function(e){return e?n.a.createElement("button",{className:"action-link red-button",onClick:t.handleDeleteClick},"X"):n.a.createElement("div",{className:"action-link"})}(!this.props.blocked&&!this.props.loading)))}}]),t}(i.Component)),p=(a(20),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).listItemAction=a.listItemAction.bind(Object(u.a)(Object(u.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"listItemAction",value:function(){var e;(e=this.props).listItemAction.apply(e,arguments)}},{key:"renderListItems",value:function(e){var t=this;return e.map(function(e){return n.a.createElement(h,{key:e.id,id:e.id,stocked:e.stocked,name:e.name,price:e.price,loading:e.loading,loadingTime:e.loadingTime,listItemAction:t.listItemAction,blocked:t.props.blocked})})}},{key:"render",value:function(){return n.a.createElement("table",null,n.a.createElement("tbody",null,n.a.createElement("tr",{className:"bold-row"},n.a.createElement("td",{className:"column-15"},this.props.listName),n.a.createElement("td",{className:"column-5"}),n.a.createElement("td",{className:"button-cell"}),n.a.createElement("td",{className:"button-cell"})),this.renderListItems(this.props.listItems)))}}]),t}(i.Component)),b=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).listItemAction=a.listItemAction.bind(Object(u.a)(Object(u.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"listItemAction",value:function(){var e;(e=this.props).listItemAction.apply(e,arguments)}},{key:"generateDisplayData",value:function(e){var t=[];return e.forEach(function(a,i){0!==i&&0!==t.filter(function(e){return e.listName===a.category}).length||t.push({listName:a.category,listItems:e.filter(function(e){return e.category===a.category})})}),t}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,this.generateDisplayData(this.props.store).map(function(t){return n.a.createElement(p,{key:t.listName,listName:t.listName,listItems:t.listItems,listItemAction:e.listItemAction,blocked:e.props.blocked})}))}}]),t}(i.Component),f=a(9),k=[{id:"100",category:"Sporting Goods",price:49.99,stocked:!0,name:"Football"},{id:"101",category:"Sporting Goods",price:9.99,stocked:!0,name:"Baseball"},{id:"102",category:"Sporting Goods",price:29.99,stocked:!1,name:"Basketball"},{id:"103",category:"Electronics",price:99.99,stocked:!0,name:"iPod Touch"},{id:"104",category:"Electronics",price:399.99,stocked:!1,name:"iPhone 5"},{id:"105",category:"Electronics",price:199.99,stocked:!0,name:"Nexus 7"},{id:"106",category:"Food",price:12.99,stocked:!1,name:"Banana"},{id:"107",category:"Food",price:1.99,stocked:!0,name:"Apple"},{id:"108",category:"Food",price:13.99,stocked:!0,name:"Orange"},{id:"109",category:"Food",price:1.99,stocked:!0,name:"Potato"},{id:"110",category:"Food",price:14.99,stocked:!1,name:"Cucumber"},{id:"111",category:"Food",price:15.99,stocked:!0,name:"Tomato"}],g={name_required:"Name is required",price_required:"Price is required",price_non_dight:"Price should be a number",price_negative:"Price should be greater than 0"},v=function(e,t){return function(a){var i=e?a.name.toLowerCase().includes(e.toLowerCase()):a;return(t?a.stocked:a)&&i}};function y(e){var t=this;return this.count=e,function(){return t.count++}}function O(e,t,a){var i=a.formErrors,n=a.nameValid,r=a.priceValid;switch(e){case"itemName":t.trim().length>0?(n=!0,i.itemName=""):(n=!1,i.itemName=g.name_required);break;case"itemPrice":if(0===t.length){r=!1,i.itemPrice=g.price_required;break}if(!t.match(/^\-?[0-9]*\.?[0-9]*$/)){r=!1,i.itemPrice=g.price_non_dight;break}if(Number(t)<=0){r=!1,i.itemPrice=g.price_negative;break}r=!0,i.itemPrice=""}return{formErrors:i,nameValid:n,priceValid:r,formValid:n&&r}}a(22);var E=function(){return{itemName:"",itemPrice:0,validation:{formErrors:{itemName:g.name_required,itemPrice:g.price_required},nameValid:!1,priceValid:!1,formValid:!1},formDirty:!1}},S=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).handleFormDirty=function(){a.state.formDirty||a.setState({formDirty:!0})},a.state=E(),a.handleInput=a.handleInput.bind(Object(u.a)(Object(u.a)(a))),a.closeModal=a.closeModal.bind(Object(u.a)(Object(u.a)(a))),a.addItem=a.addItem.bind(Object(u.a)(Object(u.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"closeModal",value:function(){this.setState(E()),this.props.closeModal()}},{key:"addItem",value:function(){this.props.addItem(this.props.index,this.state.itemName,this.state.itemPrice),this.setState(E())}},{key:"validateField",value:function(e,t,a){this.setState({validation:O(e,t,a)})}},{key:"handleInput",value:function(e){var t=this,a=e.target.name,i=e.target.value;this.setState(Object(f.a)({},a,i),function(){t.validateField(a,i,t.state.validation)})}},{key:"renderValidationErrors",value:function(){return[this.state.validation.nameValid||!this.state.formDirty?null:n.a.createElement("p",{key:"name-error"},this.state.validation.formErrors.itemName),this.state.validation.priceValid||!this.state.formDirty?null:n.a.createElement("p",{key:"price-error"},this.state.validation.formErrors.itemPrice)]}},{key:"render",value:function(){return n.a.createElement("div",{className:"modal-window",style:{top:this.props.isOpened?this.props.yCoord-40:-500}},n.a.createElement("div",{className:"outer-button",onClick:this.closeModal},"X"),n.a.createElement("h3",null,"Enter new item data"),n.a.createElement("div",null,n.a.createElement("div",{className:"inline-block small-margin"},n.a.createElement("label",{htmlFor:"itemName"},"Name"),n.a.createElement("div",null,n.a.createElement("input",{name:"itemName",type:"text",value:this.state.itemName,onChange:this.handleInput,onInput:this.handleFormDirty}))),n.a.createElement("div",{className:"inline-block small-margin"},n.a.createElement("label",{htmlFor:"itemPrice"},"Price"),n.a.createElement("div",null,n.a.createElement("input",{name:"itemPrice",type:"text",value:this.state.itemPrice,onChange:this.handleInput,onInput:this.handleFormDirty})))),n.a.createElement("div",{className:"small-margin error-line"},this.renderValidationErrors()),n.a.createElement("div",{className:"small-margin"},n.a.createElement("div",null,n.a.createElement("button",{className:"small-margin dialog-button",disabled:!this.state.validation.formValid,onClick:this.addItem},"Ok"),n.a.createElement("button",{className:"small-margin dialog-button",onClick:this.closeModal},"Cancel"))))}}]),t}(i.Component),j=(a(24),function(e){function t(){var e,a;Object(l.a)(this,t);for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return(a=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(n)))).handleFilterChange=function(e){a.props.onFilterChange(e.target.value)},a.handleShowStockChange=function(e){a.props.onShowStockChange(e.target.checked)},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("input",{className:"column-20",type:"text",placeholder:"Search...",value:this.props.searchFilter,onChange:this.handleFilterChange})),n.a.createElement("div",null,n.a.createElement("input",{type:"checkbox",checked:this.props.showOnlyStocked,onChange:this.handleShowStockChange}),n.a.createElement("span",null,"Only show products in stock")))}}]),t}(i.Component));function C(){return k.map(function(e){return function(e){return new Promise(function(t,a){var i=500+3e3*Math.random(),n=1e3+2e3*Math.random();setTimeout(function(){t(Object.assign(e,{loading:!0,loadingTime:n}))},i)})}(e)})}a(26);var I=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).reloadData=function(){a.initialStore=[],a.setState({store:a.initialStore.filter(v(a.state.searchFilter,a.state.showOnlyStocked))}),a.loadData()},a.onFilterChange=function(e){a.setState({store:a.initialStore.filter(v(e,a.state.showOnlyStocked)),searchFilter:e})},a.onShowStockChange=function(e){a.setState({store:a.initialStore.filter(v(a.state.searchFilter,e)),showOnlyStocked:e})},a.initialStore=[],a.state={store:a.initialStore,showOnlyStocked:!1,searchFilter:"",addModal:{isOpened:!1,yCoord:0,index:0}},a.generateId=new y(200),a.listItemAction=a.listItemAction.bind(Object(u.a)(Object(u.a)(a))),a.addItem=a.addItem.bind(Object(u.a)(Object(u.a)(a))),a.closeModal=a.closeModal.bind(Object(u.a)(Object(u.a)(a))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=this;C().forEach(function(t){return t.then(function(t){return e.initialStore.push(t),e.setState({store:e.initialStore.filter(v(e.state.searchFilter,e.state.showOnlyStocked))}),t}).then(function(t){setTimeout(function(){e.initialStore.filter(function(e){return e.id===t.id})[0]=Object.assign(t,{loading:!1}),e.setState({store:e.initialStore.filter(v(e.state.searchFilter,e.state.showOnlyStocked))})},t.loadingTime)})})}},{key:"closeModal",value:function(){this.setState({addModal:{isOpened:!1,yCoord:this.state.addModal.yCoord}})}},{key:"openModal",value:function(e,t){this.setState({addModal:{isOpened:!0,yCoord:e,index:t}})}},{key:"addItem",value:function(e,t,a){var i=this.generateId(),n=Object.assign({},{id:i,category:this.initialStore[e].category,price:Number(a),name:t,stocked:!0});this.initialStore.splice(e+1,0,n),this.setState({store:this.initialStore.filter(v(this.state.searchFilter,this.state.showOnlyStocked))}),this.closeModal()}},{key:"listItemAction",value:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var i=t[0],n=t[1],r=t[2];switch(i){case"delete":this.initialStore=this.initialStore.filter(function(e){return e.id!==n}),this.setState({store:this.initialStore.filter(v(this.state.searchFilter,this.state.showOnlyStocked))});break;case"add":var o=this.initialStore.findIndex(function(e){return e.id===n});this.openModal(r,o)}}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"margin-medium"},n.a.createElement(j,{searchFilter:this.state.searchFilter,showOnlyStocked:this.state.showOnlyStocked,onFilterChange:this.onFilterChange,onShowStockChange:this.onShowStockChange}),n.a.createElement(b,{store:this.state.store,listItemAction:this.listItemAction,blocked:this.state.addModal.isOpened}),n.a.createElement(S,{isOpened:this.state.addModal.isOpened,yCoord:this.state.addModal.yCoord,index:this.state.addModal.index,closeModal:this.closeModal,addItem:this.addItem}),n.a.createElement("div",{className:"margin-medium"},e.state.store&&e.state.store.length&&0===e.state.store.filter(function(e){return e.loading}).length?n.a.createElement("button",{className:"dialog-button",onClick:e.reloadData},"Reload"):null))}}]),t}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[10,2,1]]]);
//# sourceMappingURL=main.8ca7503b.chunk.js.map